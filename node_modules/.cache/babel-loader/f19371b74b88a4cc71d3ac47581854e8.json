{"ast":null,"code":"import _toConsumableArray from\"C:/Users/More/Desktop/project1/Todo/todoapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/More/Desktop/project1/Todo/todoapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{signOut,onAuthStateChanged}from\"firebase/auth\";import{auth,db}from\"../firebase.js\";import{useNavigate}from\"react-router-dom\";import{uid}from\"uid\";import{set,ref,onValue,remove,update}from\"firebase/database\";import\"./Home.css\";import AddIcon from\"@mui/icons-material/Add\";import EditIcon from\"@mui/icons-material/Edit\";import DeleteIcon from\"@mui/icons-material/Delete\";import LogoutIcon from'@mui/icons-material/Logout';import CheckIcon from'@mui/icons-material/Check';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),todo=_useState2[0],setTodo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEdit=_useState6[0],setIsEdit=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),tempUidd=_useState8[0],setTempUidd=_useState8[1];var navigate=useNavigate();useEffect(function(){auth.onAuthStateChanged(function(user){if(user){// read\nonValue(ref(db,\"/\".concat(auth.currentUser.uid)),function(snapshot){setTodos([]);var data=snapshot.val();if(data!==null){Object.values(data).map(function(todo){setTodos(function(oldArray){return[].concat(_toConsumableArray(oldArray),[todo]);});});}});}else if(!user){navigate(\"/\");}});},[]);var handleSignOut=function handleSignOut(){signOut(auth).then(function(){navigate(\"/\");}).catch(function(err){alert(err.message);});};// add\nvar writeToDatabase=function writeToDatabase(){var uidd=uid();set(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(uidd)),{todo:todo,uidd:uidd});setTodo(\"\");};// update\nvar handleUpdate=function handleUpdate(todo){setIsEdit(true);setTodo(todo.todo);setTempUidd(todo.uidd);};var handleEditConfirm=function handleEditConfirm(){update(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(tempUidd)),{todo:todo,tempUidd:tempUidd});setTodo(\"\");setIsEdit(false);};// delete\nvar handleDelete=function handleDelete(uid){remove(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(uid)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"homepage\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"add-edit-input\",type:\"text\",placeholder:\"Add todos...\",value:todo,onChange:function onChange(e){return setTodo(e.target.value);}}),todos.map(function(todo){return/*#__PURE__*/_jsxs(\"div\",{className:\"todo\",children:[/*#__PURE__*/_jsx(\"h1\",{children:todo.todo}),/*#__PURE__*/_jsx(EditIcon,{fontSize:\"large\",onClick:function onClick(){return handleUpdate(todo);},className:\"edit-button\"}),/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"large\",onClick:function onClick(){return handleDelete(todo.uidd);},className:\"delete-button\"})]});}),isEdit?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CheckIcon,{onClick:handleEditConfirm,className:\"add-confirm-icon\"})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AddIcon,{onClick:writeToDatabase,className:\"add-confirm-icon\"})}),/*#__PURE__*/_jsx(LogoutIcon,{onClick:handleSignOut,className:\"logout-icon\"})]});}","map":{"version":3,"names":["React","useEffect","useState","signOut","onAuthStateChanged","auth","db","useNavigate","uid","set","ref","onValue","remove","update","AddIcon","EditIcon","DeleteIcon","LogoutIcon","CheckIcon","Home","todo","setTodo","todos","setTodos","isEdit","setIsEdit","tempUidd","setTempUidd","navigate","user","currentUser","snapshot","data","val","Object","values","map","oldArray","handleSignOut","then","catch","err","alert","message","writeToDatabase","uidd","handleUpdate","handleEditConfirm","handleDelete","e","target","value"],"sources":["C:/Users/More/Desktop/project1/Todo/todoapp/src/components/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { signOut, onAuthStateChanged } from \"firebase/auth\";\r\nimport { auth, db } from \"../firebase.js\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { uid } from \"uid\";\r\nimport { set, ref, onValue, remove, update } from \"firebase/database\";\r\nimport \"./Home.css\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport CheckIcon from '@mui/icons-material/Check';\r\n\r\nexport default function Home() {\r\n  const [todo, setTodo] = useState(\"\");\r\n  const [todos, setTodos] = useState([]);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [tempUidd, setTempUidd] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        // read\r\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\r\n          setTodos([]);\r\n          const data = snapshot.val();\r\n          if (data !== null) {\r\n            Object.values(data).map((todo) => {\r\n              setTodos((oldArray) => [...oldArray, todo]);\r\n            });\r\n          }\r\n        });\r\n      } else if (!user) {\r\n        navigate(\"/\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleSignOut = () => {\r\n    signOut(auth)\r\n      .then(() => {\r\n        navigate(\"/\");\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n  };\r\n\r\n  // add\r\n  const writeToDatabase = () => {\r\n    const uidd = uid();\r\n    set(ref(db, `/${auth.currentUser.uid}/${uidd}`), {\r\n      todo: todo,\r\n      uidd: uidd\r\n    });\r\n\r\n    setTodo(\"\");\r\n  };\r\n\r\n  // update\r\n  const handleUpdate = (todo) => {\r\n    setIsEdit(true);\r\n    setTodo(todo.todo);\r\n    setTempUidd(todo.uidd);\r\n  };\r\n\r\n  const handleEditConfirm = () => {\r\n    update(ref(db, `/${auth.currentUser.uid}/${tempUidd}`), {\r\n      todo: todo,\r\n      tempUidd: tempUidd\r\n    });\r\n\r\n    setTodo(\"\");\r\n    setIsEdit(false);\r\n  };\r\n\r\n  // delete\r\n  const handleDelete = (uid) => {\r\n    remove(ref(db, `/${auth.currentUser.uid}/${uid}`));\r\n  };\r\n\r\n  return (\r\n    <div className=\"homepage\">\r\n      <input\r\n        className=\"add-edit-input\"\r\n        type=\"text\"\r\n        placeholder=\"Add todos...\"\r\n        value={todo}\r\n        onChange={(e) => setTodo(e.target.value)}\r\n      />\r\n\r\n      {todos.map((todo) => (\r\n        <div className=\"todo\">\r\n          <h1>{todo.todo}</h1>\r\n          <EditIcon\r\n            fontSize=\"large\"\r\n            onClick={() => handleUpdate(todo)}\r\n            className=\"edit-button\"\r\n          />\r\n          <DeleteIcon\r\n            fontSize=\"large\"\r\n            onClick={() => handleDelete(todo.uidd)}\r\n            className=\"delete-button\"\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      {isEdit ? (\r\n        <div>\r\n        <CheckIcon onClick={handleEditConfirm} className=\"add-confirm-icon\"/>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <AddIcon onClick={writeToDatabase} className=\"add-confirm-icon\" />\r\n        </div>\r\n      )}\r\n        <LogoutIcon onClick={handleSignOut} className=\"logout-icon\" />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}